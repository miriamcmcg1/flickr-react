(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,a){e.exports=a(276)},272:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(28),c=a(47),o=a(37),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){var e=JSON.parse(localStorage.getItem("search"));return null!==e?{city:e.city,limit:e.limit}:{city:"cuba",limit:21}}(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SEARCH":return{city:t.city,limit:t.limit};default:return e}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_RESULT":return t.result;default:return e}},u=Object(o.combineReducers)({search:s,result:l}),m=a(46),p=a(38),h=a(120),f=a.n(h),d=a(121),v=a(122),g=a(18),b=a(19),y=a(21),E=a(20),j=a(22),w=a(11),O=a(292),k=a(293),C=a(294),S=a(295),N=a(126),x=a.n(N),A=function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,height:450},icon:{color:"rgba(255, 255, 255, 0.54)"}}},R=function(e){function t(){return Object(g.a)(this,t),Object(y.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"grid-image-div"},r.a.createElement(O.a,{cellHeight:200,cols:3,className:"grid-image-list",style:A.gridListStyle},this.props.result.map(function(e){return r.a.createElement(k.a,{key:e.id,cols:1},r.a.createElement("img",{src:e.url,alt:e.title}),r.a.createElement(C.a,{title:e.title,subtitle:e.tags.map(function(e,t){return r.a.createElement("span",{key:t}," ","#"+e)}),actionIcon:r.a.createElement(S.a,{component:m.b,to:"/image/".concat(e.id,"/").concat(e.server,"/").concat(e.farm,"/").concat(e.secret,"/").concat(e.title)},r.a.createElement(x.a,null))}))})))}}]),t}(n.Component),T=Object(w.a)(A)(R),L=Object(c.b)(function(e){return{result:e.result}},null)(T),W=a(32),_=a.n(W),P=a(55),U=a(128),H=a.n(U),D=a(127),I=a.n(D),J=function(){var e=Object(P.a)(_.a.mark(function e(t,a){var n,r,i;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.flickr.com/services/rest?safe_search=1&per_page=".concat(a,"&format=json&nojsoncallback=1&api_key=c87626e6505304450a217c8a6a4e20cd&method=flickr.photos.search&tags=").concat(t,"&extras=tags"),e.next=3,I.a.get(n);case 3:if(200!==(r=e.sent).status){e.next=9;break}return i=r.data.photos.photo.map(function(e){return{url:z({farm:e.farm,server:e.server,id:e.id,secret:e.secret}),title:e.title,owner:e.owner,tags:e.tags.split(" "),id:e.id,farm:e.farm,secret:e.secret,server:e.server}}),e.abrupt("return",i);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),z=function(e){var t=e.id,a=e.farm,n=e.secret,r=e.server;return"https://farm".concat(a,".staticflickr.com/").concat(r,"/").concat(t,"_").concat(n,".jpg")},B=(a(272),function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(y.a)(this,Object(E.a)(t).call(this,e))).onLimitChange=function(e){this.setState({limit:Number(e.target.value),city:this.state.city})},a.onCityChange=function(e){this.setState({limit:this.state.limit,city:e.target.value})},a.state={city:a.props.city,limit:a.props.limit,result:a.props.result},a}return Object(j.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){var e=Object(P.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.state.result.length){e.next=5;break}return e.next=3,J(this.state.city,this.state.limit);case 3:t=e.sent,this.props.updateResult(t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onSubmitSearch",value:function(){var e=Object(P.a)(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.state.city||""===this.state.limit){e.next=7;break}return e.next=3,J(this.state.city,this.state.limit);case 3:t=e.sent,localStorage.setItem("search",JSON.stringify({city:this.state.city,limit:this.state.limit})),this.props.updateSearch(this.state.city,this.state.limit),this.props.updateResult(t);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"searchbar-div"},r.a.createElement("input",{className:"country-input",type:"text",defaultValue:this.props.city,placeholder:"City",onChange:function(t){return e.onCityChange(t)}}),r.a.createElement("input",{className:"limit-input",type:"number",defaultValue:this.props.limit,onChange:function(t){return e.onLimitChange(t)},min:"0",max:"200",step:"1"}),r.a.createElement("div",null,r.a.createElement(S.a,{className:"search-icon",size:"small",onClick:function(t){return e.onSubmitSearch(t)}},r.a.createElement(H.a,{fontSize:"small"}))))}}]),t}(n.Component)),V=Object(c.b)(function(e){return{city:e.search.city,limit:e.search.limit,result:e.result}},function(e){return{updateSearch:function(t,a){return e({type:"UPDATE_SEARCH",city:t,limit:a})},updateResult:function(t){return e({type:"UPDATE_RESULT",result:t})}}})(B),F=(a(273),function(e){function t(){return Object(g.a)(this,t),Object(y.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"title-div"},r.a.createElement(m.b,{to:"/"},r.a.createElement("b",{className:"title"},"FlickrCity"))),this.props.isHomePage?r.a.createElement(V,null):null)}}]),t}(n.Component)),M=function(e){function t(){return Object(g.a)(this,t),Object(y.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(F,{isHomePage:!0}),r.a.createElement("div",null,r.a.createElement(L,null)))}}]),t}(n.Component),Q=(a(274),function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(y.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).url=z({farm:a.props.match.params.farm,server:a.props.match.params.server,id:a.props.match.params.id,secret:a.props.match.params.secret}),a}return Object(j.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(F,{isHomePage:!0}),r.a.createElement("div",{className:"div-image"},r.a.createElement("img",{src:this.url,alt:this.props.match.params.title,className:"image-div"}),r.a.createElement(C.a,{title:this.props.match.params.title,className:"gridtilebar"})))}}]),t}(n.Component));d.a.add(v.a);var $=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,null,r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(p.a,{exact:!0,path:"/",component:M}),r.a.createElement(p.a,{name:"image",path:"/image/:id/:server/:farm/:secret/:title",component:Q})))))},q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var K=a(129),X=(a(275),Object(o.createStore)(u,Object(K.composeWithDevTools)()));Object(i.render)(r.a.createElement(c.a,{store:X},r.a.createElement($,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");q?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):G(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):G(e)})}}()}},[[134,1,2]]]);
//# sourceMappingURL=main.a85c54e8.chunk.js.map