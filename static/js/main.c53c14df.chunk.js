(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(t,e,n){t.exports=n(292)},236:function(t,e,n){},288:function(t,e,n){},289:function(t,e,n){},290:function(t,e,n){},291:function(t,e,n){},292:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(29),s=n(48),c=n(37),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){var t=JSON.parse(localStorage.getItem("search"));return null!==t?{city:t.city,limit:t.limit}:{city:"cuba",limit:21}}(),e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_SEARCH":return{city:e.city,limit:e.limit};default:return t}},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_RESULT":return e.result;default:return t}},u=Object(c.combineReducers)({search:o,result:l}),m=n(47),h=n(39),p=n(122),d=n.n(p),f=n(123),g=n(124),v=n(18),b=n(19),y=n(22),w=n(20),E=n(21),j=n(38),O=n(11),S=n(308),k=n(309),C=n(310),x=n(311),N=n(128),W=n.n(N),R=(n(236),function(t){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:t.palette.background.paper},gridList:{width:500,height:450},icon:{color:"rgba(255, 255, 255, 0.54)"}}}),L=function(t){function e(t){var n;return Object(v.a)(this,e),(n=Object(y.a)(this,Object(w.a)(e).call(this,t))).state={width:0,height:0,smallScreen:!1},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(j.a)(n)),n}return Object(E.a)(e,t),Object(b.a)(e,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){var t=window.innerWidth<=750;this.setState({width:window.innerWidth,height:window.innerHeight,smallScreen:t})}},{key:"render",value:function(){return i.a.createElement("div",{className:"grid-image-div"},i.a.createElement(S.a,{cellHeight:200,cols:this.state.smallScreen?2:3,className:"grid-image-lis",style:R.gridListStyle},this.props.result.map(function(t){return i.a.createElement(k.a,{key:t.id,cols:1},i.a.createElement("img",{src:t.url,alt:t.title}),i.a.createElement(C.a,{title:t.title,subtitle:t.tags.map(function(t,e){return i.a.createElement("span",{key:e}," ","#"+t)}),actionIcon:i.a.createElement(x.a,{component:m.b,to:"/image/".concat(t.id,"/").concat(t.server,"/").concat(t.farm,"/").concat(t.secret,"/").concat(t.title)},i.a.createElement(W.a,null))}))})))}}]),e}(a.Component),D=Object(O.a)(R)(L),T=Object(s.b)(function(t){return{result:t.result}},null)(D),A=n(23),P=n.n(A),U=n(52),_=n(132),H=n.n(_),q=n(129),I=n.n(q),J=function(){var t=Object(U.a)(P.a.mark(function t(e,n){var a,i,r;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://api.flickr.com/services/rest?safe_search=1&per_page=".concat(n,"&format=json&nojsoncallback=1&api_key=c87626e6505304450a217c8a6a4e20cd&method=flickr.photos.search&tags=").concat(e,"&extras=tags"),t.next=3,I.a.get(a);case 3:if(200!==(i=t.sent).status){t.next=9;break}return r=i.data.photos.photo.map(function(t){return{url:z({farm:t.farm,server:t.server,id:t.id,secret:t.secret}),title:t.title,owner:t.owner,tags:t.tags.split(" "),id:t.id,farm:t.farm,secret:t.secret,server:t.server}}),t.abrupt("return",r);case 9:return t.abrupt("return",[]);case 10:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),z=function(t){var e=t.id,n=t.farm,a=t.secret,i=t.server;return"https://farm".concat(n,".staticflickr.com/").concat(i,"/").concat(e,"_").concat(a,".jpg")},F=n(130),V=n(131),B=n.n(V),M=(n(288),function(t){var e=t.trim().toLowerCase(),n=e.length;return 0===n?[]:F.filter(function(t){return t.name.toLowerCase().slice(0,n)===e})}),Q=function(t){return t.name},$=function(t){return i.a.createElement("div",null,t.name)},G=function(t){function e(t){var n;return Object(v.a)(this,e),(n=Object(y.a)(this,Object(w.a)(e).call(this,t))).onSuggestionsFetchRequested=function(t){var e=t.value;n.setState({suggestions:M(e)})},n.onSuggestionsClearRequested=function(){n.setState({suggestions:[]})},n.onLimitChange=function(t){this.setState({limit:Number(t.target.value),city:this.state.city})},n.onCityChange=function(t,e){var n=e.newCity;this.setState({limit:this.state.limit,city:n})},n.onCityChange=function(t,e){var a=e.newValue;n.setState({city:a})},n.state={city:n.props.city,limit:n.props.limit,result:n.props.result,suggestions:[]},n.onLimitChange=n.onLimitChange.bind(Object(j.a)(n)),n.onCityChange=n.onCityChange.bind(Object(j.a)(n)),n}return Object(E.a)(e,t),Object(b.a)(e,[{key:"handleSubmit",value:function(){var t=Object(U.a)(P.a.mark(function t(e){var n;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(this.state),""===this.state.city||""===this.state.limit){t.next=8;break}return t.next=4,J(this.state.city,this.state.limit);case 4:n=t.sent,localStorage.setItem("search",JSON.stringify({city:this.state.city,limit:this.state.limit})),this.props.updateSearch(this.state.city,this.state.limit),this.props.updateResult(n);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var t=Object(U.a)(P.a.mark(function t(){var e;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==this.state.result.length){t.next=5;break}return t.next=3,J(this.state.city,this.state.limit);case 3:e=t.sent,this.props.updateResult(e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"onSubmitSearch",value:function(){var t=Object(U.a)(P.a.mark(function t(e){var n;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""===this.state.city||""===this.state.limit){t.next=7;break}return t.next=3,J(this.state.city,this.state.limit);case 3:n=t.sent,localStorage.setItem("search",JSON.stringify({city:this.state.city,limit:this.state.limit})),this.props.updateSearch(this.state.city,this.state.limit),this.props.updateResult(n);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e={placeholder:"Type a city",value:this.state.city,onChange:this.onCityChange};return i.a.createElement("form",{onSubmit:function(e){return t.onSubmitSearch(e)}},i.a.createElement("div",{className:"searchbar-div"},i.a.createElement(B.a,{className:"city-input",suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:Q,renderSuggestion:$,inputProps:e}),i.a.createElement("input",{className:"limit-input",type:"number",defaultValue:this.props.limit,onChange:function(e){return t.onLimitChange(e)},min:"0",max:"100",step:"1"}),i.a.createElement("div",null,i.a.createElement(x.a,{className:"search-icon",type:"submit",value:"Submit",size:"small",onClick:function(e){return t.onSubmitSearch(e)}},i.a.createElement(H.a,{fontSize:"small"})))))}}]),e}(a.Component),K=Object(s.b)(function(t){return{city:t.search.city,limit:t.search.limit,result:t.result}},function(t){return{updateSearch:function(e,n){return t({type:"UPDATE_SEARCH",city:e,limit:n})},updateResult:function(e){return t({type:"UPDATE_RESULT",result:e})}}})(G),X=(n(289),function(t){function e(){return Object(v.a)(this,e),Object(y.a)(this,Object(w.a)(e).apply(this,arguments))}return Object(E.a)(e,t),Object(b.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"navbar"},i.a.createElement("div",{className:"title-div"},i.a.createElement(m.b,{to:"/"},i.a.createElement("b",{className:"title"},"FlickrCity"))),this.props.isHomePage?i.a.createElement(K,null):null)}}]),e}(a.Component)),Y=function(t){function e(){return Object(v.a)(this,e),Object(y.a)(this,Object(w.a)(e).apply(this,arguments))}return Object(E.a)(e,t),Object(b.a)(e,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(X,{isHomePage:!0}),i.a.createElement("div",null,i.a.createElement(T,null)))}}]),e}(a.Component),Z=(n(290),function(t){function e(){var t,n;Object(v.a)(this,e);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(y.a)(this,(t=Object(w.a)(e)).call.apply(t,[this].concat(i)))).url=z({farm:n.props.match.params.farm,server:n.props.match.params.server,id:n.props.match.params.id,secret:n.props.match.params.secret}),n}return Object(E.a)(e,t),Object(b.a)(e,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(X,{isHomePage:!1}),i.a.createElement("div",{className:"div-image"},i.a.createElement("img",{src:this.url,alt:this.props.match.params.title,className:"image-div"}),i.a.createElement(C.a,{title:this.props.match.params.title,className:"gridtilebar"})))}}]),e}(a.Component));f.a.add(g.a);var tt=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(d.a,null,i.a.createElement(m.a,null,i.a.createElement("div",null,i.a.createElement(h.a,{exact:!0,path:"/",component:Y}),i.a.createElement(h.a,{name:"image",path:"/image/:id/:server/:farm/:secret/:title",component:Z})))))},et=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function nt(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}var at=n(133),it=(n(291),Object(c.createStore)(u,Object(at.composeWithDevTools)()));Object(r.render)(i.a.createElement(s.a,{store:it},i.a.createElement(tt,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/flickr-react",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/flickr-react","/service-worker.js");et?(function(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):nt(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):nt(t)})}}()}},[[138,1,2]]]);
//# sourceMappingURL=main.c53c14df.chunk.js.map