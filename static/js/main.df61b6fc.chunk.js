(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,n){e.exports=n(292)},236:function(e,t,n){},288:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(28),c=n(48),s=n(37),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){var e=JSON.parse(localStorage.getItem("search"));return null!==e?{city:e.city,limit:e.limit}:{city:"cuba",limit:21}}(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SEARCH":return{city:t.city,limit:t.limit};default:return e}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_RESULT":return t.result;default:return e}},u=Object(s.combineReducers)({search:o,result:l}),m=n(47),h=n(39),p=n(122),d=n.n(p),f=n(123),g=n(124),v=n(18),b=n(19),y=n(22),w=n(20),E=n(21),j=n(38),O=n(11),k=n(308),S=n(309),C=n(310),N=n(311),W=n(128),x=n.n(W),R=(n(236),function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:500,height:450},icon:{color:"rgba(255, 255, 255, 0.54)"}}}),L=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(y.a)(this,Object(w.a)(t).call(this,e))).state={width:0,height:0,smallScreen:!1},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(j.a)(n)),n}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){var e=window.innerWidth<=750;this.setState({width:window.innerWidth,height:window.innerHeight,smallScreen:e})}},{key:"render",value:function(){return i.a.createElement("div",{className:"grid-image-div"},i.a.createElement(k.a,{cellHeight:200,cols:this.state.smallScreen?2:3,className:"grid-image-lis",style:R.gridListStyle},this.props.result.map(function(e){return i.a.createElement(S.a,{key:e.id,cols:1},i.a.createElement("img",{src:e.url,alt:e.title}),i.a.createElement(C.a,{title:e.title,subtitle:e.tags.map(function(e,t){return i.a.createElement("span",{key:t}," ","#"+e)}),actionIcon:i.a.createElement(N.a,{component:m.b,to:"/image/".concat(e.id,"/").concat(e.server,"/").concat(e.farm,"/").concat(e.secret,"/").concat(e.title)},i.a.createElement(x.a,null))}))})))}}]),t}(a.Component),D=Object(O.a)(R)(L),T=Object(c.b)(function(e){return{result:e.result}},null)(D),A=n(32),P=n.n(A),U=n(56),_=n(132),H=n.n(_),q=n(129),z=n.n(q),F=function(){var e=Object(U.a)(P.a.mark(function e(t,n){var a,i,r;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.flickr.com/services/rest?safe_search=1&per_page=".concat(n,"&format=json&nojsoncallback=1&api_key=c87626e6505304450a217c8a6a4e20cd&method=flickr.photos.search&tags=").concat(t,"&extras=tags"),e.next=3,z.a.get(a);case 3:if(200!==(i=e.sent).status){e.next=9;break}return r=i.data.photos.photo.map(function(e){return{url:I({farm:e.farm,server:e.server,id:e.id,secret:e.secret}),title:e.title,owner:e.owner,tags:e.tags.split(" "),id:e.id,farm:e.farm,secret:e.secret,server:e.server}}),e.abrupt("return",r);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){var t=e.id,n=e.farm,a=e.secret,i=e.server;return"https://farm".concat(n,".staticflickr.com/").concat(i,"/").concat(t,"_").concat(a,".jpg")},J=n(130),V=n(131),B=n.n(V),M=(n(288),function(e){var t=e.trim().toLowerCase(),n=t.length;return 0===n?[]:J.filter(function(e){return e.name.toLowerCase().slice(0,n)===t})}),Q=function(e){return e.name},$=function(e){return i.a.createElement("div",null,e.name)},G=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(y.a)(this,Object(w.a)(t).call(this,e))).onSuggestionsFetchRequested=function(e){var t=e.value;n.setState({suggestions:M(t)})},n.onSuggestionsClearRequested=function(){n.setState({suggestions:[]})},n.onLimitChange=function(e){this.setState({limit:Number(e.target.value),city:this.state.city})},n.onCityChange=function(e,t){var a=t.newValue;n.setState({city:a})},n.state={city:n.props.city,limit:n.props.limit,result:n.props.result,suggestions:[]},n.onLimitChange=n.onLimitChange.bind(Object(j.a)(n)),n.onCityChange=n.onCityChange.bind(Object(j.a)(n)),n}return Object(E.a)(t,e),Object(b.a)(t,[{key:"componentWillMount",value:function(){var e=Object(U.a)(P.a.mark(function e(){var t;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.state.result.length){e.next=5;break}return e.next=3,F(this.state.city,this.state.limit);case 3:t=e.sent,this.props.updateResult(t);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onSubmitSearch",value:function(){var e=Object(U.a)(P.a.mark(function e(t){var n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===this.state.city||""===this.state.limit){e.next=8;break}return e.next=4,F(this.state.city,this.state.limit);case 4:n=e.sent,localStorage.setItem("search",JSON.stringify({city:this.state.city,limit:this.state.limit})),this.props.updateSearch(this.state.city,this.state.limit),this.props.updateResult(n);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t={placeholder:"Type a city",value:this.state.city,onChange:this.onCityChange};return i.a.createElement("form",{onSubmit:function(t){return e.onSubmitSearch(t)}},i.a.createElement("div",{className:"searchbar-div"},i.a.createElement(B.a,{className:"city-input",suggestions:this.state.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:Q,renderSuggestion:$,inputProps:t}),i.a.createElement("input",{className:"limit-input",type:"number",defaultValue:this.props.limit,onChange:function(t){return e.onLimitChange(t)},min:"0",max:"100",step:"1"}),i.a.createElement("div",null,i.a.createElement(N.a,{className:"search-icon",type:"submit",value:"Submit",size:"small",onClick:function(t){return e.onSubmitSearch(t)}},i.a.createElement(H.a,{fontSize:"small"})))))}}]),t}(a.Component),K=Object(c.b)(function(e){return{city:e.search.city,limit:e.search.limit,result:e.result}},function(e){return{updateSearch:function(t,n){return e({type:"UPDATE_SEARCH",city:t,limit:n})},updateResult:function(t){return e({type:"UPDATE_RESULT",result:t})}}})(G),X=(n(289),function(e){function t(){return Object(v.a)(this,t),Object(y.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"navbar"},i.a.createElement("div",{className:"title-div"},i.a.createElement(m.b,{to:"/"},i.a.createElement("b",{className:"title"},"FlickrCity"))),this.props.isHomePage?i.a.createElement(K,null):null)}}]),t}(a.Component)),Y=function(e){function t(){return Object(v.a)(this,t),Object(y.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(X,{isHomePage:!0}),i.a.createElement("div",null,i.a.createElement(T,null)))}}]),t}(a.Component),Z=(n(290),function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(y.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(i)))).url=I({farm:n.props.match.params.farm,server:n.props.match.params.server,id:n.props.match.params.id,secret:n.props.match.params.secret}),n}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(X,{isHomePage:!1}),i.a.createElement("div",{className:"div-image"},i.a.createElement("img",{src:this.url,alt:this.props.match.params.title,className:"image-div"}),i.a.createElement(C.a,{title:this.props.match.params.title,className:"gridtilebar"})))}}]),t}(a.Component));f.a.add(g.a);var ee=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(d.a,null,i.a.createElement(m.a,null,i.a.createElement("div",null,i.a.createElement(h.a,{exact:!0,path:"/",component:Y}),i.a.createElement(h.a,{name:"image",path:"/image/:id/:server/:farm/:secret/:title",component:Z})))))},te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ae=n(133),ie=(n(291),Object(s.createStore)(u,Object(ae.composeWithDevTools)()));Object(r.render)(i.a.createElement(c.a,{store:ie},i.a.createElement(ee,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/flickr-react",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/flickr-react","/service-worker.js");te?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ne(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ne(e)})}}()}},[[138,1,2]]]);
//# sourceMappingURL=main.df61b6fc.chunk.js.map